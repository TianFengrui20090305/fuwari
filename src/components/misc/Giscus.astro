---
import { GiscusConfig } from "../../config";

interface Props {
	class?: string;
}

const { class: className } = Astro.props;

// Only render if giscus is enabled
if (!GiscusConfig.enable) {
	return null;
}
---

<div class={`giscus-container ${className || ''}`}>
  <div class="giscus" id="comments"></div>
  <script
    src="https://giscus.app/client.js"
    data-repo={GiscusConfig.repo}
    data-repo-id={GiscusConfig.repoId}
    data-category={GiscusConfig.category}
    data-category-id={GiscusConfig.categoryId}
    data-mapping={GiscusConfig.mapping}
    data-strict={GiscusConfig.dataStrict}
    data-reactions-enabled={GiscusConfig.reactionsEnabled}
    data-emit-metadata="0"
    data-input-position={GiscusConfig.inputPosition}
    data-theme={GiscusConfig.theme}
    data-lang={GiscusConfig.lang}
    data-loading={GiscusConfig.loading}
    crossorigin="anonymous"
    async
  ></script>
</div>

<style>
  .giscus-container {
    margin-top: 2rem;
    border-top: 1px solid var(--line-divider);
    padding-top: 1.5rem;
  }

  .giscus {
    width: 100%;
  }

  .giscus-frame {
    border: none;
    border-radius: var(--radius-large);
  }
</style>
